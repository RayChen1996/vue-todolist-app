"use strict";(self["webpackChunkvue_todolist_app"]=self["webpackChunkvue_todolist_app"]||[]).push([[178],{5178:function(t,e,a){a.r(e),a.d(e,{default:function(){return xt}});var l=a(6252),i=a(3577),s=a(9963);const o=t=>((0,l.dD)("data-v-be88eaa0"),t=t(),(0,l.Cn)(),t),d={class:"container"},n={class:"text-end mt-4"},r={class:"table mt-4"},c=o((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{width:"120"}," 分類 "),(0,l._)("th",null,"產品名稱"),(0,l._)("th",{width:"120"}," 原價 "),(0,l._)("th",{width:"120"}," 售價 "),(0,l._)("th",{width:"100"}," 是否啟用 "),(0,l._)("th",{width:"120"}," 編輯 ")])],-1))),p={class:"text-end"},u={class:"text-end"},g={key:0,class:"text-success"},m={key:1},b={class:"btn-group"},h=["onClick"],_=["onClick"],v={class:"row"},y={class:"col"},w={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},f={class:"modal-dialog modal-xl"},k={class:"modal-content border-0"},P={class:"modal-header bg-dark text-white"},U={id:"productModalLabel",class:"modal-title"},x={key:0},C={key:1},M=o((()=>(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))),I={class:"modal-body"},$={class:"row"},D={class:"col-sm-4"},S={class:"mb-2"},V={class:"mb-3"},z=o((()=>(0,l._)("label",{for:"imageUrl",class:"form-label"},"輸入圖片網址",-1))),E=o((()=>(0,l._)("img",{class:"img-fluid",src:"",alt:""},null,-1))),N=o((()=>(0,l._)("div",null,[(0,l._)("button",{class:"btn btn-outline-primary btn-sm d-block w-100"}," 新增圖片 ")],-1))),A=o((()=>(0,l._)("div",null,[(0,l._)("button",{class:"btn btn-outline-danger btn-sm d-block w-100"}," 刪除圖片 ")],-1))),Z={class:"col-sm-8"},J={class:"mb-3"},L=o((()=>(0,l._)("label",{for:"title",class:"form-label"},"標題",-1))),O={class:"row"},B={class:"mb-3 col-md-6"},H=o((()=>(0,l._)("label",{for:"category",class:"form-label"},"分類",-1))),K={class:"mb-3 col-md-6"},Y=o((()=>(0,l._)("label",{for:"price",class:"form-label"},"單位",-1))),W={class:"row"},j={class:"mb-3 col-md-6"},q=o((()=>(0,l._)("label",{for:"origin_price",class:"form-label"},"原價",-1))),F={class:"mb-3 col-md-6"},G=o((()=>(0,l._)("label",{for:"price",class:"form-label"},"售價",-1))),Q=o((()=>(0,l._)("hr",null,null,-1))),R={class:"mb-3"},T=o((()=>(0,l._)("label",{for:"description",class:"form-label"},"產品描述",-1))),X={class:"mb-3"},tt=o((()=>(0,l._)("label",{for:"content",class:"form-label"},"說明內容",-1))),et={class:"mb-3"},at={class:"form-check"},lt=o((()=>(0,l._)("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1))),it={class:"modal-footer"},st=o((()=>(0,l._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1))),ot={id:"delProductModal",ref:"delProductModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},dt={class:"modal-dialog"},nt={class:"modal-content border-0"},rt=(0,l.uE)('<div class="modal-header bg-danger text-white" data-v-be88eaa0><h5 id="delProductModalLabel" class="modal-title" data-v-be88eaa0><span data-v-be88eaa0>刪除產品</span></h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" data-v-be88eaa0></button></div><div class="modal-body" data-v-be88eaa0> 是否刪除 <strong class="text-danger" data-v-be88eaa0></strong> 商品(刪除後將無法恢復)。 </div>',2),ct={class:"modal-footer"},pt=o((()=>(0,l._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1)));function ut(t,e,a,o,ut,gt){const mt=(0,l.up)("pagenation");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",d,[(0,l._)("div",n,[(0,l._)("button",{class:"btn btn-primary","data-bs-toggle":"modal",onClick:e[0]||(e[0]=t=>ut.isNew=!0),"data-bs-target":"#productModal"}," 建立新的產品 ")]),(0,l._)("table",r,[c,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ut.products,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",null,(0,i.zw)(t.category),1),(0,l._)("td",null,(0,i.zw)(t.title),1),(0,l._)("td",p,(0,i.zw)(t.origin_price),1),(0,l._)("td",u,(0,i.zw)(t.price),1),(0,l._)("td",null,[t.is_enabled?((0,l.wg)(),(0,l.iD)("span",g,"啟用")):((0,l.wg)(),(0,l.iD)("span",m,"未啟用"))]),(0,l._)("td",null,[(0,l._)("div",b,[(0,l._)("button",{type:"button",class:"btn btn-outline-primary btn-sm","data-bs-toggle":"modal","data-id":"{{product.id}}",onClick:e=>{gt.SelectedEditId(t.id),ut.isNew=!1},"data-bs-target":"#productModal"}," 編輯 ",8,h),(0,l._)("button",{type:"button",class:"btn btn-outline-danger btn-sm","data-id":"{{product.id}}","data-bs-toggle":"modal",onClick:e=>{gt.SelectedId(t.id)},"data-bs-target":"#delProductModal"}," 刪除 ",8,_)])])])))),128))])]),(0,l._)("div",v,[(0,l._)("div",y,[(0,l.Wm)(mt,{page:ut.pagination,"get-products":gt.getProducts,onChgPages:gt.getProducts},null,8,["page","get-products","onChgPages"])])])]),(0,l._)("div",w,[(0,l._)("div",f,[(0,l._)("div",k,[(0,l._)("div",P,[(0,l._)("h5",U,[ut.isNew?((0,l.wg)(),(0,l.iD)("span",x,"新增產品")):((0,l.wg)(),(0,l.iD)("span",C,"編輯產品"))]),M]),(0,l._)("div",I,[(0,l._)("div",$,[(0,l._)("div",D,[(0,l._)("div",S,[(0,l._)("div",V,[z,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=t=>ut.imageUrl=t),placeholder:"請輸入圖片連結"},null,512),[[s.nr,ut.imageUrl]])]),E]),N,A]),(0,l._)("div",Z,[(0,l._)("div",J,[L,(0,l.wy)((0,l._)("input",{id:"title","onUpdate:modelValue":e[2]||(e[2]=t=>ut.title=t),type:"text",class:"form-control",placeholder:"請輸入標題"},null,512),[[s.nr,ut.title]])]),(0,l._)("div",O,[(0,l._)("div",B,[H,(0,l.wy)((0,l._)("input",{id:"category","onUpdate:modelValue":e[3]||(e[3]=t=>ut.category=t),type:"text",class:"form-control",placeholder:"請輸入分類"},null,512),[[s.nr,ut.category]])]),(0,l._)("div",K,[Y,(0,l.wy)((0,l._)("input",{id:"unit","onUpdate:modelValue":e[4]||(e[4]=t=>ut.unit=t),type:"text",class:"form-control",placeholder:"請輸入單位"},null,512),[[s.nr,ut.unit]])])]),(0,l._)("div",W,[(0,l._)("div",j,[q,(0,l.wy)((0,l._)("input",{id:"origin_price","onUpdate:modelValue":e[5]||(e[5]=t=>ut.origin_price=t),type:"number",min:"0",class:"form-control",placeholder:"請輸入原價"},null,512),[[s.nr,ut.origin_price]])]),(0,l._)("div",F,[G,(0,l.wy)((0,l._)("input",{id:"price",type:"number","onUpdate:modelValue":e[6]||(e[6]=t=>ut.price=t),min:"0",class:"form-control",placeholder:"請輸入售價"},null,512),[[s.nr,ut.price]])])]),Q,(0,l._)("div",R,[T,(0,l.wy)((0,l._)("textarea",{id:"description","onUpdate:modelValue":e[7]||(e[7]=t=>ut.description=t),type:"text",class:"form-control",placeholder:"請輸入產品描述"},"\r\n                    ",512),[[s.nr,ut.description]])]),(0,l._)("div",X,[tt,(0,l.wy)((0,l._)("textarea",{id:"description","onUpdate:modelValue":e[8]||(e[8]=t=>ut.content=t),type:"text",class:"form-control",placeholder:"請輸入說明內容"},"\r\n                    ",512),[[s.nr,ut.content]])]),(0,l._)("div",et,[(0,l._)("div",at,[(0,l.wy)((0,l._)("input",{id:"is_enabled","onUpdate:modelValue":e[9]||(e[9]=t=>ut.is_enabled=t),class:"form-check-input",type:"checkbox","true-value":1,"false-value":0},null,512),[[s.e8,ut.is_enabled]]),lt])])])])]),(0,l._)("div",it,[st,ut.isNew?((0,l.wg)(),(0,l.iD)("button",{key:0,type:"button",class:"btn btn-primary",onClick:e[10]||(e[10]=(...t)=>gt.AddProduct&&gt.AddProduct(...t))}," 確認 ")):((0,l.wg)(),(0,l.iD)("button",{key:1,type:"button",class:"btn btn-primary",onClick:e[11]||(e[11]=(...t)=>gt.modifyProduct&&gt.modifyProduct(...t))}," 儲存 "))])])])],512),(0,l._)("div",ot,[(0,l._)("div",dt,[(0,l._)("div",nt,[rt,(0,l._)("div",ct,[pt,(0,l._)("button",{type:"button",class:"btn btn-danger",onClick:e[12]||(e[12]=t=>gt.removeProduct())}," 確認刪除 ")])])])],512)])}a(7658);var gt=a(8945);const mt={"aria-label":"Page navigation example"},bt={class:"pagination"},ht=["onClick"];function _t(t,e,a,o,d,n){return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("nav",mt,[(0,l._)("ul",bt,[(0,l._)("li",{class:(0,i.C_)(["page-item",{disabled:!a.page.has_pre}])},[(0,l._)("a",{onClick:e[0]||(e[0]=(0,s.iM)((t=>a.getProducts(a.page.current_page-1)),["prevent"])),class:"page-link"},"上一頁")],2),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.page.total_pages,(e=>((0,l.wg)(),(0,l.iD)("li",{class:(0,i.C_)(["page-item",{active:e===a.page.current_page}]),key:e+"page"},[(0,l._)("a",{onClick:(0,s.iM)((a=>t.$emit("chgPages",e)),["prevent"]),class:"page-link"},(0,i.zw)(e),9,ht)],2)))),128)),(0,l._)("li",{class:(0,i.C_)(["page-item",{disabled:!a.page.has_next}])},[(0,l._)("a",{onClick:e[1]||(e[1]=(0,s.iM)((t=>a.getProducts(a.page.current_page+1)),["prevent"])),class:"page-link"},"下一頁")],2)])])])}var vt={name:"PageBar",props:["page","getProducts"],components:{},data(){return{msg:""}},methods:{}},yt=a(3744);const wt=(0,yt.Z)(vt,[["render",_t]]);var ft=wt;let kt="https://vue3-course-api.hexschool.io/";var Pt={name:"ProductsView",props:{},components:{pagenation:ft},data(){return{isNew:!1,showModel:!1,EditProductModal:null,delIdx:0,EditIdx:0,apiPath:"raychen",Caption:"新增產品",title:"",origin_price:0,category:"",price:"",unit:"個",products:[],tempProduct:{},is_enabled:!1,description:"",content:"",imageUrl:"",imageUrl1:"",imageUrl2:"",imageUrl3:"",imageUrl4:"",imageUrl5:"",pagination:{}}},methods:{SelectedEditId(t){this.EditIdx=t},SelectedId(t){this.delIdx=t},checkIsManager(){const t=`${kt}/v2/api/user/check`;gt.Z.post(t).then((()=>{this.getProducts()})).catch((t=>{alert(t.response.data.message)}))},openModal(){},getProducts(t=1){var e=JSON.parse(localStorage.getItem("token"));const a={headers:{Authorization:e.token}},l=`${kt}/v2/api/${this.apiPath}/admin/products?page=${t}`;gt.Z.get(l,a).then((t=>{console.log(t),t.data.success&&(this.products=t.data.products,this.pagination=t.data.pagination,console.log(this.pagination))})).catch((t=>{alert(t.response.data.message),this.$router.push("/")}))},MakePagenation(){},AddProduct(){var t=JSON.parse(localStorage.getItem("token"));const e={headers:{Authorization:t.token}},a=`${kt}v2/api/${this.apiPath}/admin/product`;gt.Z.post(a,{data:{title:this.title,category:this.category,origin_price:this.origin_price,price:this.price,unit:this.unit||"個",description:this.description,content:this.content,is_enabled:this.is_enabled,imageUrl:this.imageUrl,imagesUrl:[this.imageUrl1,this.imageUrl2,this.imageUrl3,this.imageUrl4,this.imageUrl5]}},e).then((t=>{t.data.success&&this.$router.push("/product")})).catch((t=>{alert(t)}))},modifyProduct(){var t=JSON.parse(localStorage.getItem("token"));const e={headers:{Authorization:t.token}},a=`${kt}/v2/api/${this.apiPath}/admin/product/${this.EditIdx}`;gt.Z.put(a,{data:{title:this.title,category:this.category,origin_price:this.origin_price,price:this.price,unit:this.unit||"個",description:this.description,content:this.content,is_enabled:this.is_enabled,imageUrl:this.imageUrl,imagesUrl:[this.imageUrl1,this.imageUrl2,this.imageUrl3,this.imageUrl4,this.imageUrl5]}},e).then((t=>{console.log(t.data)})).catch((t=>{alert(t.response.data.message),this.$router.push("/")}))},removeProduct(){var t=JSON.parse(localStorage.getItem("token"));const e={headers:{Authorization:t.token}},a=`${kt}/v2/api/${this.apiPath}/admin/product/${this.delIdx}`;gt.Z["delete"](a,e).then((t=>{t.data.success&&(this.products=t.data.products),this.getProducts()})).catch((t=>{alert(t.response.data.message),this.$router.push("/")}))},expandProduct(t){this.tempProduct=t}},mounted(){this.getProducts(),this.EditProductModal=document.getElementById("productModal")}};const Ut=(0,yt.Z)(Pt,[["render",ut],["__scopeId","data-v-be88eaa0"]]);var xt=Ut}}]);
//# sourceMappingURL=178.b0ee4f3d.js.map